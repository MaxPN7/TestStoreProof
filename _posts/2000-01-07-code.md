---
title: "code"
bg: #9AD1F5
color: black
style: center
fa-icon: github
---

In order to execute our codes without having to set up all parameters like the version of python and other stuff, create you own Image with singularity

<img src="./assets/logos/sing.png" alt="singularity logo"/>

### Install Singularity (for Linux)

To use the tools for downloading and processing the dataset, you need to install [Singularity](https://www.sylabs.io/docs/), a software performing operating-system-level virtualization (or containerization).

[This link](https://www.sylabs.io/guides/2.5.1/user-guide/installation.html#before-you-begin) provides the steps for the installation.

To check your installation, execute this command in your shell:
```
singularity run
```

### Install Singularity with Vagrant (for Windows, Mac OS)

To install Singularity on Windows or Mac OS you will need to run a virtual machine. The Singularity documentation recommends using [Vagrant](https://www.vagrantup.com/).

You can check [here](https://app.vagrantup.com/singularityware) the available VagrantFile provided.

### Build image from scratch

First of all, clone this repository, then go to the image folder:

```
git clone https://github.com/imatge-upc/speech2signs.git

cd speech2signs/image
```

To build the Singularity image from scratch, you need to run this command (make sure you execute this command in the same directory as the Singularity file):

```
sudo singularity build <your_image_name>.img Singularity
```

### Apps information

This container provides three functions:

1/ dldataset : Download Youtube videos upon a list of URL provided in text files in a directory
2/ extract\_frames : Extract frames from input video file and save them as separate frames in an output directory.
3/ extract\_mfcc\_mel : Extract MFCC and MEL features.

First you need to download the dataset with the dldataset app. Then, since you have video and audio to process, you can either use the two other apps.

### Run apps

Once the image is built, you can run the image.

To check the apps available:

```
singularity apps <your_image_file>
```

To check the usage of an app:

```
singularity run --app <app_name> <your_image_file> -h
```

### Working on a folder external to the container

You may need to download or process the dataset for example on your host machine instead of inside the container. To do that, Singularity provides binding path.

Let's say we want to download the dataset in a folder named "Video" on the home folder of our host machine. A way to do that is:

```
singularity run -B ~/Video:/myfolderintheimage --app dldataset <your_image_file> /myfolderintheimage
```

In this example, our folder on our host machine is binded on the /myfolderintheimage folder of the container (it does not matter if this folder exist inside the image).

For more information, check [this link](https://www.sylabs.io/guides/2.5.1/user-guide/bind_paths_and_mounts.html?highlight=bind).